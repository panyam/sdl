{{# include "./Header.html" #}}
{{# if false #}}
{{# include "./MDBasePage.html" #}}
{{# else #}}
{{# include "./OldBasePage.html" #}}
{{# end #}}
{{# include "./gen.CaseStudyPage.html" #}}
{{# include "./CommonPageHeader.html" #}}
{{# include "./ScrollTopAndComment.html" #}}
{{# include "./TOC.html" #}}
{{# include "./Article.html" #}}

{{ define "ExtraHeadSection" }}
    <title>{{.Title}}</title>
    <meta property="og:title" content="{{.Title}}" />
    <meta property="og:description" content="{{.Summary}}" }} />
    <style>
    @media print {
      .noPrint {
        display:none;
      }
      #contentPanel {
        overflow: scroll;
      }
    }
    @media screen {
      main {
        overflow-y: auto;
      }
      #contentPanel {
        overflow: auto;
      }
    }
    main {
        display: flex;
        flex-direction: row;
    }

    .gutter {
        background-color: #eee;
        background-repeat: no-repeat;
        background-position: 50%;
    }

    .gutter.gutter-horizontal {
        background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
        cursor: col-resize;
    }
    </style>
    <link
      rel="stylesheet"
      href="https://esm.sh/@excalidraw/excalidraw@0.18.0/dist/dev/index.css"
    />
    <style>
    .toolbarButtonImage:hover {
      border: solid 1px red
    }
    .toolbarButtonImage {
      width: 32px;
      height: 32px;
      margin-top: 0px;
      margin-bottom: 0px;
    }
    .toolbarButton {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: small;
    }
    .drawingToolbar {
      gap: 5px;
      padding: 5px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
  </style>
{{ end }}

{{ define "FooterBody" }}<hr/>{{ end }} 

{{ define "HeaderCenterSection" }}<h1 class="text-3xl font-semibold">{{ .FrontMatter.title }}</h1>{{ end }} 

{{ define "BodySection" }}
<input type=hidden id="caseStudyId" value="{{.Id}}" />
<input type=hidden id="scrollToBottom" value="{{.FrontMatter.scrollToBottom}}" />
<main class="w-full flex-grow" tabindex="0">
  <div id = "outlinePanel" class="noPrint p-4 overflow-auto" style="width: calc(15% - 5px);"> {{ template "TOC" .Res.Document.Metadata.TOC }} </div>
  <div id = "contentPanel" class="pl-12" style="width: calc(70% - 10px);">
    <div class="mx-auto px-4 sm:px-6 xl:px-0">
      <div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0 " style="gridTemplateRows: 'auto 1fr'">
        <div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0">
          {{ template "Article" . }}
          {{ template "Footer" . }}
          {{ template "ScrollTopAndComment" }}
        </div>
      </div>
    </div>
  </div>
  <div id = "notesPanel" class="noPrint p-4 overflow-auto"></div>
</main>

{{ end }}

{{ define "PostBodySection" }}
  {{ template "gen.CaseStudyPage.html" }}
{{ end }}

{{ define "CaseStudyPage" }}
{{ template "BasePage" . }}
{{ end }}
