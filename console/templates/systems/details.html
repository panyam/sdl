{{# include "base.html" #}}

{{define "content"}}
<div class="h-screen flex flex-col bg-gray-950">
    <!-- Header -->
    <header class="bg-gray-800 border-b border-gray-700 px-6 py-3">
        <div class="flex justify-between items-center">
            <div class="flex items-center gap-4">
                <a href="/systems" class="inline-flex items-center gap-2 px-4 py-2 text-gray-400 border border-gray-600 rounded-lg hover:text-white hover:border-gray-500 transition-colors">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Back to Systems
                </a>
                <h1 class="text-2xl font-bold text-white">{{.System.Name}}</h1>
            </div>
            <div class="flex items-center gap-2">
                <button id="share-btn" class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors">
                    Share
                </button>
                <button id="run-btn" class="px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold flex items-center gap-2">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" fill-rule="evenodd"></path>
                    </svg>
                    Run
                </button>
                <button id="stop-btn" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors font-semibold flex items-center gap-2 hidden">
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8 7a1 1 0 00-1 1v4a1 1 0 001 1h4a1 1 0 001-1V8a1 1 0 00-1-1H8z" clip-rule="evenodd" fill-rule="evenodd"></path>
                    </svg>
                    Stop
                </button>
                <a href="/canvases/{{.System.ID}}" class="px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors">
                    Open in IDE
                </a>
            </div>
        </div>
    </header>
    
    <!-- Main Layout -->
    <div class="flex-1 flex overflow-hidden">
        <!-- Editor Section -->
        <div class="flex-1 flex flex-col">
            <!-- Tabs -->
            <div class="bg-gray-850 border-b border-gray-700 flex">
                <button class="tab-btn px-6 py-3 text-gray-400 hover:text-white border-b-2 border-transparent transition-colors active" data-tab="sdl">
                    System Design
                </button>
                <button class="tab-btn px-6 py-3 text-gray-400 hover:text-white border-b-2 border-transparent transition-colors" data-tab="recipe">
                    Demo Recipe
                </button>
            </div>
            
            <!-- Editor Container -->
            <div id="editor-container" class="flex-1"></div>
        </div>
        
        <!-- Visualization Section -->
        <div class="w-2/5 flex flex-col border-l border-gray-700">
            <div id="architecture-panel" class="flex-1 overflow-auto"></div>
            <div id="metrics-panel" class="flex-1 overflow-auto hidden"></div>
            <div id="traffic-panel" class="flex-1 overflow-auto hidden"></div>
        </div>
    </div>
    
    <!-- Output Section -->
    <div id="output-section" class="hidden border-t border-gray-700 bg-gray-850">
        <div class="px-4 py-2 border-b border-gray-700">
            <h3 class="text-sm font-semibold text-gray-300 uppercase tracking-wide">Output</h3>
        </div>
        <div id="output-content" class="p-4 text-sm font-mono text-gray-300 max-h-48 overflow-auto"></div>
    </div>
</div>
{{end}}

{{define "head"}}
<style>
    .tab-btn.active {
        @apply text-white border-blue-500;
    }
    
    #output-content .info {
        @apply text-blue-400;
    }
    
    #output-content .error {
        @apply text-red-400;
    }
    
    #output-content .success {
        @apply text-green-400;
    }
</style>
{{end}}