{{ define "DrawingView" -}}


{{ $drawingWidth := "" }}
{{ $drawingHeight := "" }}

{{ if and false (or .DrawingEditable (DrawingPreviewExists .caseStudyId .id "dark.svg" )) }}
  {{ $drawingHeight = (or .height "800px")}}
  {{ $drawingWidth = (or .width "100%")}}
{{ end }}

<div successHeight={{or .height "800px"}} successWidth ={{or .width "100%"}}
    style='display: flex; width: {{ $drawingWidth }}; height: {{ $drawingHeight }}; border: solid 0px red'
    class="drawingContainer" caseStudyId="{{.caseStudyId}}" drawingId="{{.id}}">
{{ if not .DrawingEditable -}}
  <div class="drawingPreviewContainer" style='width: 100%; height: 100%' caseStudyId="{{.caseStudyId}}" drawingId="{{.id}}">
    <a href="javascript:void(0)" class = "drawingEditorLink" id = "drawingPreviewImage_{{.caseStudyId}}_{{.id}}">
      {{- if DrawingPreviewExists .caseStudyId .id "light.svg" -}}
        <img class = "drawingPreviewImage" src='{{DrawingPreviewUrl .caseStudyId .id "light.svg" }}'/>
      {{- else -}}
        <button>Click to create {{.id}}</button>
      {{- end -}}
    </a>
  </div>
{{ else -}}
  <div class="systemDrawing" style='width: 100%; height: 100%' caseStudyId="{{.caseStudyId}}" drawingId="{{.id}}">
    <pre><code>{{ DrawingData .caseStudyId .id }}</code></pre>
    <div class="excalidrawRoot"  style='width: 100%; height: 100%'></div>
  </div>
  {{ if (or false .ShowToolBar ) -}}
  <div class="drawingToolbar">
    <button class="toolbarButton"><img class="toolbarButtonImage saveButton" src="/static/images/save.svg"/>Save</button>
    <!--<button class="toolbarButton"><img class="toolbarButtonImage reloadButton" src="/static/images/reset.svg" />Reload</button>-->
    <button class="toolbarButton"><img class="toolbarButtonImage reloadButton" src="/static/images/reset.svg" />Reload</button>
    <button class="toolbarButton"><img class="toolbarButtonImage toggleFSButton" src="/static/images/open_in_full.svg" />Reload</button>
  </div>
  {{ end -}}
  <!--<div class="toggleFullScreenButton"><button><img src="/static/images/open_in_full.svg" width="32"/></button></div>-->
{{- end }}
</div>
{{ end }}
